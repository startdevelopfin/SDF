<!doctype html>
<html data-bs-theme="auto" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="Part 2: Leveling up our Temperature Converter app with advanced Swift concepts" name="description" />
    <meta content="Daniel J. Aupont" name="author" />
    <meta content="Ignite v0.2.1" name="generator" />
    <title>SwiftUI Fundamentals üöÄ ‚Äì Swift Blog Site</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet" />
    <link href="/css/prism-xcode-dark.css" rel="stylesheet" data-highlight-theme="xcode-dark" />
    <link href="/css/prism-xcode-light.css" rel="stylesheet" data-highlight-theme="xcode-light" />
    <link href="/css/prism-plugins.css" rel="stylesheet" />
    <link href="/css/bootstrap-icons.min.css" rel="stylesheet" />
    <link href="/css/ignite-core.min.css" rel="stylesheet" />
    <link href="https://startdevelopfinish.com/swiftUI/temperatureConverter2" rel="canonical" />
    <script>(function() {
    function getThemePreference() {
        return localStorage.getItem('custom-theme') || 'auto';
    }

    function applyTheme(themeID) {
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const lightThemeID = document.documentElement.getAttribute('data-light-theme') || 'light';
        const darkThemeID = document.documentElement.getAttribute('data-dark-theme') || 'dark';
        const actualThemeID = themeID === 'auto' ? (prefersDark ? darkThemeID : lightThemeID) : themeID;

        document.documentElement.setAttribute('data-bs-theme', actualThemeID);
        document.documentElement.setAttribute('data-theme-state', themeID);
    }

    function applySyntaxTheme() {
        const syntaxTheme = getComputedStyle(document.documentElement)
            .getPropertyValue('--syntax-highlight-theme').trim().replace(/"/g, '');

        if (!syntaxTheme) return;

        document.querySelectorAll('link[data-highlight-theme]').forEach(link => {
            link.setAttribute('disabled', 'disabled');
        });

        const themeLink = document.querySelector(`link[data-highlight-theme="${syntaxTheme}"]`);
        if (themeLink) {
            themeLink.removeAttribute('disabled');
        }
    }

    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
        const currentTheme = getThemePreference();
        if (currentTheme === 'auto') {
            applyTheme('auto');
            applySyntaxTheme();
        }
    });

    const savedTheme = getThemePreference();
    applyTheme(savedTheme);
    applySyntaxTheme();
})();
</script>
    <meta content="Start. Develop. Finish." property="og:site_name" />
    <meta content="/images/photos/temperatureConverter2.png" property="og:image" />
    <meta content="/images/photos/temperatureConverter2.png" name="twitter:image" />
    <meta content="SwiftUI Fundamentals üöÄ" property="og:title" />
    <meta content="SwiftUI Fundamentals üöÄ" name="twitter:title" />
    <meta content="Part 2: Leveling up our Temperature Converter app with advanced Swift concepts" property="og:description" />
    <meta content="Part 2: Leveling up our Temperature Converter app with advanced Swift concepts" name="twitter:description" />
    <meta content="https://startdevelopfinish.com/swiftUI/temperatureConverter2" property="og:url" />
    <meta content="startdevelopfinish.com" name="twitter:domain" />
    <meta content="summary_large_image" name="twitter:card" />
    <meta content="on" name="twitter:dnt" />
  </head>
  <body class="container">
    <header>
      <nav class="fixed-top navbar navbar-expand-md" style="background-color: rgb(0 0 0 / 100%)" data-bs-theme="dark">
        <div class="container">
          <a href="/" class="link-underline link-underline-opacity-100 link-underline-opacity-100-hover navbar-brand"><p class="mb-0">Start. <span style="color: #6B8E23;">Develop</span>. Finish.</p></a>
          <button type="button" class="btn navbar-toggler" data-bs-target="#navbarCollapse" data-bs-toggle="collapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
          <div id="navbarCollapse" class="collapse navbar-collapse">
            <ul class="col justify-content-end mb-2 mb-md-0 navbar-nav">
              <li class="dropdown nav-item" data-bs-theme="light"><a href="#" role="button" class="dropdown dropdown-toggle link-underline link-underline-opacity-100 link-underline-opacity-100-hover nav-link" data-bs-toggle="dropdown" aria-expanded="false">SwiftUI Tutorials</a>
                <ul class="dropdown dropdown-menu">
                  <li><p class="dropdown-header"><a href="/swiftUI/temperatureConverter">Temperature Converter</a></p></li>
                  <li><p class="dropdown-header"><a href="/swiftUI/temperatureConverter2">Temperature Converter pt. 2</a></p></li>
                </ul></li>
              <li class="dropdown nav-item" data-bs-theme="light"><a href="#" role="button" class="dropdown dropdown-toggle link-underline link-underline-opacity-100 link-underline-opacity-100-hover nav-link" data-bs-toggle="dropdown" aria-expanded="false">App Store</a>
                <ul class="dropdown dropdown-menu">
                  <li><a href="/by-rule" class="dropdown-item link-underline link-underline-opacity-100 link-underline-opacity-100-hover">By Rule</a></li>
                </ul></li>
              <li class="dropdown nav-item" data-bs-theme="light"><a href="#" role="button" class="dropdown dropdown-toggle link-underline link-underline-opacity-100 link-underline-opacity-100-hover nav-link" data-bs-toggle="dropdown" aria-expanded="false">Info</a>
                <ul class="dropdown dropdown-menu">
                  <li><a href="/about" class="dropdown-item link-underline link-underline-opacity-100 link-underline-opacity-100-hover">About</a></li>
                </ul></li>
            </ul>
          </div>
        </div>
      </nav>
    </header>
    <div class="row">
      <div class="col-md-9">
        <div style="padding-bottom: 80px; padding-top: 80px">
          <div>
            <h1>SwiftUI Fundamentals üöÄ</h1>
            <div class="card">
              <div class="card-body">
                <p>Daniel J. Aupont</p>
                <p>Published on Mar 8, 2025</p>
                <p>1391 words; 6 minutes to read.</p>
                <h3 class="card-title"><a href="/tags/swift-u-i" rel="tag" class="link-plain link-underline link-underline-opacity-100 link-underline-opacity-100-hover"><span class="badge rounded-pill text-bg-primary" style="margin-right: 5px">SwiftUI</span></a><a href="/tags/app" rel="tag" class="link-plain link-underline link-underline-opacity-100 link-underline-opacity-100-hover"><span class="badge rounded-pill text-bg-primary" style="margin-right: 5px">App</span></a></h3>
              </div>
            </div>
          </div>
          <p></p>
          <p>Part 2: Leveling up our Temperature Converter app with advanced Swift concepts</p> 
          <p><img src="https://firebasestorage.googleapis.com/v0/b/by-rule-90fbd.appspot.com/o/swiftuiweekly%2FTC01.png?alt=media&amp;token=1da40d82-d6b2-4ef4-816e-8a75afca1b26" alt="Temperature Converter 2" style="height: 400px;" /></p> 
          <p><br /><br /></p>
          <h2>To Be Continued‚Ä¶ üìù</h2>
          <p>Last week, I created a simple Temperature Converter app using basic Swift concepts. This week, lets take it to the next level by implementing more advanced Swift features. In this post, we will explore how they can make our code more robust, maintainable, and scalable.</p> 
          <br />
          <br /> 
          <h2>Enhanced Temperature Converter App üå°Ô∏è</h2>
          <p>Here's how I've updated the app:</p> 
          <ol>
            <li>Improved the <code>UI</code> with validation feedback</li>
            <li>Implemented <code>error handling</code> for <code>invalid</code> inputs</li>
            <li>Added decimal place <code>precision</code> control</li>
            <li>Created a robust architecture using <code>protocols</code> and <code>classes</code></li>
            <li>Added <code>conversion history</code> tracking <br /><br /></li>
          </ol>
          <h2>Error Handling with Throwing Functions ‚ö†Ô∏è</h2>
          <p>Instead of silently failing when users enter invalid input, we can use Swift's error handling system to provide meaningful feedback.</p> 
          <pre><code class="language-swift">/// Errors that can occur during temperature conversion.
enum TemperatureError: Error {
case invalidInput
    
    /// User-friendly error description.
    var localizedDescription: String {
        switch self {
        case .invalidInput:
            return "Please enter a valid number for the temperature."
        }
    }
}

// A throwing function that validates and converts temperature
func convert(_ value: String, from fromUnit: TemperatureUnit, to toUnit: TemperatureUnit) throws -&gt; Double {
    guard let inputValue = Double(value) else {
        throw TemperatureError.invalidInput
    }
}
</code></pre>
          <p><br /><br /></p>
          <p>Using the `throws` keyword tells Swift that this function can throw errors, which must be handled by the caller using `do-try-catch`. This makes the app more robust by gracefully handling errors rather than simply crashing.</p> 
          <pre><code class="language-swift">do {
    let result = try converter.convert(inputTemperature, from: fromUnit, to: toUnit)
    // Use the result
} catch TemperatureError.invalidInput {
    // Handle invalid input error
} catch {
    // All other errors
}
</code></pre>
          <p><br /><br /></p>
          <h2>Optionals for Error Handling üîÑ</h2>
          <p>I use an optional `String` to represent an error message that might or might not exist:</p> 
          <pre><code class="language-swift">@State private var errorMessage: String? = nil
</code></pre>
          <p>When displaying it, I use nil coalescing to provide a default. This is a clean way to handle potentially absent values:</p> 
          <pre><code class="language-swift">Text(errorMessage ?? "An unknown error occurred")
</code></pre>
          <p><br /><br /></p>
          <h2>Protocols and Classes for Conversion Logic üß©</h2>
          <p>The original app had conversion logic embedded directly in the view. Now, I've extracted it into a proper architecture using protocols and classes:</p> 
          <pre><code class="language-swift">// Define a protocol for temperature conversion
protocol TemperatureConvertible {
    func convert(_ value: String, from fromUnit: TemperatureUnit, to toUnit: TemperatureUnit) throws -&gt; Double
    func formatTemperature(_ value: Double, decimalPlaces: Int) -&gt; String
}

// Implement the protocol in a class
final class TemperatureConverter: TemperatureConvertible {
    // Singleton pattern with static shared instance
    static let shared = TemperatureConverter()
    
    private init() {}
    
    /// Converts a temperature value from one unit to another.
    /// - Parameters:
    ///   - value: The temperature value to convert as a string.
    ///   - fromUnit: The unit of the input temperature.
    ///   - toUnit: The unit to convert the temperature to.
    /// - Returns: The converted temperature value.
    /// - Throws: `TemperatureError.invalidInput` if the provided value is not a valid number.
    func convert(_ value: String, from fromUnit: TemperatureUnit, to toUnit: TemperatureUnit) throws -&gt; Double {
        // If input and output units are the same, return the original value
        if fromUnit == toUnit, let doubleValue = Double(value) {
            return doubleValue
        }
        
        guard let inputValue = Double(value) else {
            throw TemperatureError.invalidInput
        }
        
        // Convert to celsius first (base unit for conversion)
        let valueInCelsius = toCelsius(inputValue, from: fromUnit)
        
        // Then convert from celsius to the desired output unit
        return fromCelsius(valueInCelsius, to: toUnit)
    }
    
    /// Formats a temperature value with the specified number of decimal places.
    /// - Parameters:
    ///   - value: The temperature value to format.
    ///   - decimalPlaces: The number of decimal places to include (default is 2).
    /// - Returns: A formatted string representation of the temperature.
    func formatTemperature(_ value: Double, decimalPlaces: Int = 2) -&gt; String {
        return String(format: "%.\(decimalPlaces)f", value)
    }
    
    /// Converts a temperature from any unit to Celsius.
    /// - Parameters:
    ///   - value: The temperature value to convert.
    ///   - unit: The unit of the temperature value.
    /// - Returns: The temperature value in Celsius.
    private func toCelsius(_ value: Double, from unit: TemperatureUnit) -&gt; Double {
        switch unit {
        case .celsius:
            return value
        case .fahrenheit:
            return (value - 32) * 5 / 9
        case .kelvin:
            return value - 273.15
        }
    }
    
    /// Converts a temperature from Celsius to another unit.
    /// - Parameters:
    ///   - value: The temperature value in Celsius.
    ///   - unit: The unit to convert the temperature to.
    /// - Returns: The converted temperature value.
    private func fromCelsius(_ value: Double, to unit: TemperatureUnit) -&gt; Double {
        switch unit {
        case .celsius:
            return value
        case .fahrenheit:
            return (value * 9 / 5) + 32
        case .kelvin:
            return value + 273.15
        }
    }
}
</code></pre>
          <p><br /><br /></p>
          <p>This approach gives us:</p> 
          <ol>
            <li><strong><code>Protocol</code>-based design</strong>: Clear contract for what a temperature converter should do</li>
            <li><strong><code>Singleton</code> pattern</strong>: Easy access to the converter throughout the app</li>
            <li><strong><code>Access control</code></strong>: Public API with private implementation details</li>
            <li><strong><code>Default parameter</code> values</strong>: Convenience for common cases <br /><br /></li>
          </ol>
          <h2>Structs and Computed Properties for History Tracking üìù</h2>
          <p>To track conversion history, I use a struct with computed properties:</p> 
          <pre><code class="language-swift">/// Represents a temperature conversion record.
struct TemperatureRecord: Identifiable {
    /// Unique identifier for the record.
    let id = UUID()
    
    /// The original temperature value entered by the user.
    let inputValue: String
    
    /// The unit of the input temperature.
    let fromUnit: TemperatureUnit
    
    /// The unit of the output temperature.
    let toUnit: TemperatureUnit
    
    /// The converted temperature value.
    let result: String
    
    /// The date and time when the conversion was performed.
    let timestamp: Date = Date()
    
    /// Formatted timestamp for display purposes.
    var formattedTimestamp: String {
        let formatter = DateFormatter()
        formatter.timeStyle = .short
        return formatter.string(from: timestamp)
    }
}
</code></pre>
          <p>The `formattedTimestamp` computed property dynamically formats the timestamp whenever it's accessed, without needing to store the formatted string.</p> 
          <br />
          <br /> 
          <h2>Using Closures for Button Actions üîò</h2>
          <p>In SwiftUI, we frequently use closures for button actions:</p> 
          <pre><code class="language-swift">Button(action: {
    convertAndSave()  // This is a closure!
}) {
    Text("Save Conversion")
        .padding()
        .frame(maxWidth: .infinity)
        .background(Color.blue)
        .foregroundColor(.white)
        .cornerRadius(8)
}
</code></pre>
          <p>The closure executes when the button is tapped. This is a powerful example of "passing functions into functions."</p> 
          <br />
          <br /> 
          <h2>Key Terms I‚Äôm Adding to My Vocabulary üìù</h2>
          <table class="table">
            <thead>
              <tr>
                <th scope="col"><strong>Term</strong></th>
                <th scope="col"><strong>Definition</strong></th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong><code>Throwing Functions</code></strong></td>
                <td>Functions that can signal errors using Swift‚Äôs <code>throw</code> mechanism</td>
              </tr>
              <tr>
                <td><strong><code>Protocol</code></strong></td>
                <td>A blueprint of methods and properties that conforming types must implement</td>
              </tr>
              <tr>
                <td><strong><code>Computed Property</code></strong></td>
                <td>A property that runs code to determine its value rather than storing it</td>
              </tr>
              <tr>
                <td><strong><code>Access Control</code></strong></td>
                <td>Restricting access to parts of your code with keywords like <code>private</code> and <code>public</code></td>
              </tr>
              <tr>
                <td><strong><code>Extension</code></strong></td>
                <td>A way to add functionality to existing types without subclassing</td>
              </tr>
              <tr>
                <td><strong><code>Nil Coalescing</code></strong></td>
                <td>The <code>??</code> operator that provides a default value when an optional is nil</td>
              </tr>
              <tr>
                <td><strong><code>Closure</code></strong></td>
                <td>Self-contained blocks of functionality that can be passed around and used in your code</td>
              </tr>
              <tr>
                <td><strong><code>Singleton Pattern</code></strong></td>
                <td>A design pattern ensuring a class has only one instance with global access</td>
              </tr>
            </tbody>
          </table>
          <p><br /><br /></p>
          <h2>Resources I Found Helpful ‚ö°Ô∏è</h2>
          <ul>
            <li><strong><a href="https://docs.swift.org/swift-book/LanguageGuide/ErrorHandling.html">Swift.org - Error Handling</a></strong>: Official documentation on Swift‚Äôs error handling</li>
          </ul>
          <hr />
          <p><em>See the <a href="https://github.com/startdevelopfin/TemperatureConverter">complete implementation on GitHub</a></em></p>
          <p></p>
        </div>
      </div>
      <div class="col-md-3">
        <div class="sticky-top" style="padding-top: 80px">
          <h3>Read this next‚Ä¶</h3>
          <div class="card" style="background-color: rgb(102 51 153 / 50%); border: 6.0px solid rgb(0 0 0 / 100%); border-bottom-left-radius: 12px; border-bottom-right-radius: 12px; border-top-left-radius: 12px; border-top-right-radius: 12px; box-shadow: rgb(0 0 0 / 33%) 0px 0px 5px inset; margin-bottom: 20px">
            <div class="card-header">
              <h2><a href="/info/about" class="link-underline link-underline-opacity-100 link-underline-opacity-100-hover">About üë§</a></h2>
            </div>
            <div class="card-body">
              <p class="card-text mb-0">Technical writing on this blog, where I break down complex Swift concepts</p>
            </div>
            <div class="card-footer text-body-secondary">
              <div style="margin-top: -5px"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <p class="mt-5 text-center">Created in Swift with <a href="https://github.com/twostraws/Ignite" class="link-underline link-underline-opacity-100 link-underline-opacity-100-hover">Ignite</a></p>
    <script src="/js/bootstrap.bundle.min.js"></script>
    <script src="/js/syntax-highlighting.js"></script>
    <script src="/js/ignite-core.js"></script>
  </body>
</html>